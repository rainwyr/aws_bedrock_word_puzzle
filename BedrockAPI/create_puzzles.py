import uuid
import time
import boto3
from botocore.config import Config


AGENT_ID = "3OR1X5NSQW"
AGENT_ALIAS_ID = "6PXYEEUQ0V"

config = Config(
    read_timeout=300,
    connect_timeout=30,
    retries={
        'max_attempts': 2,
        'mode': 'standard'
    }
)

bedrock_agent = boto3.client(
    service_name='bedrock-agent-runtime',
    region_name='us-east-1',
    config=config
)

target_words = [
    "Ball",
    "Band",
    "Bank",
    "Bar",
    "Bark",
    "Barrel",
    "Base",
    "Bat",
    "Bay",
    "Bell",
    "Belt",
    "Blade",
    "Block",
    "Board",
    "Bolt",
    "Boom",
    "Bowl",
    "Break",
    "Brick",
    "Brush",
    "Buckle",
    "Cable",
    "Can",
    "Cane",
    "Cap",
    "Case",
    "Cell",
    "Chain",
    "Charge",
    "Check",
    "Checkmate",
    "Chime",
    "Cliff",
    "Clip",
    "Clipper",
    "Club",
    "Coil",
    "Comb",
    "Crack",
    "Cradle",
    "Crane",
    "Crate",
    "Crown",
    "Curl",
    "Date",
    "Dock",
    "Draft",
    "Drill",
    "Drop",
    "Drum",
    "Fair",
    "Fall",
    "Fan",
    "File",
    "Fire",
    "Float",
    "Fly",
    "Frame",
    "Glass",
    "Glove",
    "Grid",
    "Hook",
    "Iron",
    "Jam",
    "Key",
    "Label",
    "Lace",
    "Lap",
    "Lash",
    "Lead",
    "Lever",
    "Lid",
    "Light",
    "Line",
    "Lineup",
    "Lock",
    "Mark",
    "Mat",
    "Match",
    "Mine",
    "Mint",
    "Mold",
    "Mouse",
    "Nest",
    "Net",
    "Note",
    "Pad",
    "Padlock",
    "Page",
    "Pan",
    "Park",
    "Patch",
    "Pin",
    "Pitch",
    "Pitcher",
    "Plank",
    "Plant",
    "Plot",
    "Point",
    "Pole",
    "Pool",
    "Rack",
    "Racket",
    "Ribbon",
    "Ring",
    "Rock",
    "Roll",
    "Root",
    "Row",
    "Ruler",
    "Sack",
    "Sail",
    "Saw",
    "Scale",
    "Score",
    "Screen",
    "Seal",
    "Set",
    "Shell",
    "Shot",
    "Shower",
    "Shuttle",
    "Slide",
    "Spike",
    "Spine",
    "Spring",
    "Stamp",
    "Stampede",
    "Stand",
    "Staple",
    "Star",
    "Stool",
    "Stream",
    "Stretch",
    "Suit",
    "Suitcase",
    "Tackle",
    "Tag",
    "Tank",
    "Tap",
    "Thread",
    "Tide",
    "Tie",
    "Toast",
    "Torch",
    "Train",
    "Tray",
    "Trip",
    "Vault",
    "Vein",
    "Watch",
    "Wave",
    "Well",
    "Wellness",
    "aisle",
    "album",
    "aloe",
    "anchor",
    "ant",
    "anvil",
    "apartment",
    "apex",
    "apple",
    "apricot",
    "apron",
    "arch",
    "arrow",
    "atom",
    "axe",
    "bacon",
    "bag",
    "bamboo",
    "basil",
    "beach",
    "beacon",
    "beetle",
    "bridge",
    "broom",
    "bubble",
    "button",
    "cactus",
    "candle",
    "carrot",
    "castle",
    "cat",
    "chalk",
    "clay",
    "cloud",
    "compass",
    "coral",
    "cup",
    "dagger",
    "dart",
    "deer",
    "desk",
    "diamond",
    "dog",
    "dolphin",
    "donut",
    "drawer",
    "drizzle",
    "drone",
    "eagle",
    "ear",
    "echo",
    "eel",
    "egg",
    "elbow",
    "ember",
    "emu",
    "engine",
    "engineer",
    "envy",
    "escalator",
    "exit",
    "expedition",
    "feather",
    "fern",
    "filament",
    "fin",
    "fish",
    "flag",
    "flare",
    "floor",
    "flute",
    "fork",
    "fossil",
    "frost",
    "funnel",
    "garage",
    "gate",
    "geyser",
    "gift",
    "glacier",
    "glasses",
    "glyph",
    "gown",
    "grape",
    "gravel",
    "guitar",
    "hammer",
    "hammock",
    "harp",
    "hat",
    "hatch",
    "helmet",
    "hill",
    "hinge",
    "hoop",
    "hose",
    "hover",
    "hurdle",
    "ice",
    "iceberg",
    "icicle",
    "igloo",
    "ignite",
    "ink",
    "inn",
    "insect",
    "intercom",
    "internet",
    "iris",
    "island",
    "itch",
    "jackal",
    "jacket",
    "jar",
    "jeans",
    "jewel",
    "jigsaw",
    "jogger",
    "joist",
    "jug",
    "juice",
    "jungle",
    "kangaroo",
    "kayak",
    "kazoo",
    "kernel",
    "kettle",
    "keyhole",
    "kiosk",
    "kite",
    "knee",
    "knob",
    "knot",
    "koala",
    "ladder",
    "ladle",
    "lamp",
    "lantern",
    "latch",
    "laundry",
    "lava",
    "leaf",
    "ledge",
    "lemon",
    "lint",
    "lion",
    "lizard",
    "loop",
    "magnet",
    "mailbox",
    "mango",
    "mantle",
    "maze",
    "meter",
    "microphone",
    "mirror",
    "mist",
    "monkey",
    "moon",
    "mud",
    "mug",
    "nachos",
    "nail",
    "nebula",
    "needle",
    "node",
    "nose",
    "notebook",
    "nozzle",
    "nugget",
    "obelisk",
    "ocean",
    "octopus",
    "oil",
    "omelet",
    "opera",
    "orange",
    "orbit",
    "orca",
    "outlet",
    "oven",
    "owl",
    "oxide",
    "paddle",
    "paint",
    "parcel",
    "parrot",
    "patio",
    "pebble",
    "pen",
    "pencil",
    "petal",
    "pillow",
    "pizza",
    "prism",
    "quartz",
    "queen",
    "queue",
    "quiet",
    "quill",
    "quilt",
    "quiz",
    "quote",
    "radio",
    "raft",
    "raven",
    "reed",
    "reef",
    "reel",
    "robot",
    "rope",
    "rug",
    "rung",
    "rust",
    "scarf",
    "scooter",
    "shovel",
    "sleet",
    "slug",
    "socks",
    "spoon",
    "stairs",
    "steam",
    "sun",
    "switch",
    "table",
    "teapot",
    "tent",
    "thermostat",
    "throne",
    "thunder",
    "ticket",
    "tile",
    "tooth",
    "tower",
    "track",
    "tree",
    "tusk",
    "twig",
    "ulna",
    "umbrella",
    "umpire",
    "uncle",
    "unicorn",
    "uniform",
    "uplift",
    "uplink",
    "urinal",
    "urn",
    "usher",
    "utensil",
    "utility",
    "van",
    "vane",
    "vase",
    "vent",
    "vest",
    "vial",
    "vine",
    "violin",
    "visor",
    "volcano",
    "vortex",
    "vulture",
    "wallet",
    "wand",
    "wardrobe",
    "warp",
    "web",
    "whale",
    "wheel",
    "whirl",
    "wick",
    "window",
    "worm",
    "wrist",
    "xenolith",
    "xenon",
    "xray",
    "xylitol",
    "xylophone",
    "yard",
    "yardstick",
    "yardwork",
    "yarn",
    "yawn",
    "yawned",
    "yellowtail",
    "yeti",
    "yeti_crab",
    "yeti_cup",
    "yield",
    "yodel",
    "yogurt",
    "yolk",
    "zapper",
    "zebra",
    "zen",
    "zenith",
    "zeppelin",
    "zigzag",
    "zip",
    "zipline",
    "ziplock",
    "zipper",
    "zoo",
]

for original_word in target_words:
    target_word = original_word.lower()
    session_id = str(uuid.uuid4())
    input_prompt = f"Can you create a puzzle for {target_word}. Images generated should be detailed and realistic, no text, no labels, no numbers, no logos."

    print(f"\nüß© Generating puzzle for: {target_word}")
    try:
        response = bedrock_agent.invoke_agent(
            agentId=AGENT_ID,
            agentAliasId=AGENT_ALIAS_ID,
            sessionId=session_id,
            inputText=input_prompt
        )

        event_stream = response.get("completion")
        for event in event_stream:
            decoded_text = event["chunk"]["bytes"].decode("utf-8")
            print(decoded_text, end="")

        # Optional: Add a slight pause between requests to avoid throttling
        time.sleep(1)

    except Exception as e:
        print(f"‚ùå Error generating puzzle for {target_word}: {str(e)}")
